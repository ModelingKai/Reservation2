# 2. 予約Idファクトリを導入する

Date: 2020-12-30

## Status

Accepted

## Context

予約するユースケースのテストコードを書く必要があり、
予約完了の確認のために、予約IDを指定して予約をする取得する必要があった。

元々の予約Idはコンストラクタの中でGuidで生成をしている為、
実行するたびにランダムな予約Idが生成される。

そのため、テストがしづらかった。

## Decision

予約Idのコンストラクタ内でランダムなIdを生成することは止めた。
予約Idファクトリインターフェースを導入し、ユースケースクラスのメソッドから呼ぶように変更した。

予約Idファクトリのインターフェースは、Domain層の予約パッケージ内に配置した。

予約Idのコンストラクタで、入力された文字列がGuidであることを確認していたが、Guidであるかどうかは、ファクトリに寄せることにした為、予約Idの中ではチェックしない。

## Consequences

予約Idファクトリの差し替えをすることによって、テストコードでは連番で予約Idを採番し、
プロダクションコードでは、引き続きGuidで生成できるようになった。
